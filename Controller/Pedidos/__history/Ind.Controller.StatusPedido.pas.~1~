unit Ind.Controller.StatusPedido;

interface

uses
  Ind.Controller.Interfaces;
type
  TControllerStatusPedido = class(TInterfacedObject, iControllerStatusPedido)
    private
      FParent : iController;
    public
      constructor Create(Parent : iController);
      destructor Destroy; override;
      class function New(Parent : iController) : iControllerStatusPedido;
      function StatusGetColor(value: TPedidoStatus): Cardinal;
      function StatusGetString(value: TPedidoStatus): string;
      function &End : iController;
  end;

implementation

uses
  System.Generics.Collections;

{ TControllerStatusPedido }

function TControllerStatusPedido.&End: iController;
begin
  Result := FParent;
end;

constructor TControllerStatusPedido.Create(Parent : iController);
begin
  FParent := Parent;
end;

destructor TControllerStatusPedido.Destroy;
begin

  inherited;
end;

class function TControllerStatusPedido.New(Parent : iController): iControllerStatusPedido;
begin
  Result := Self.Create(Parent);
end;

function TControllerStatusPedido.StatusGetColor(value: TPedidoStatus): Cardinal;
var
  Lista : TList<Cardinal>;
begin
  Lista := TList<Cardinal>.Create;

  try
    Lista.Insert(Integer(TPedidoStatus.tpEmDigitacao), $FF949494);
    Lista.Insert(Integer(TPedidoStatus.tpEmEspera), $FFBB1B1B);
    Lista.Insert(Integer(TPedidoStatus.tpEmPreparo), $FFF98323);
    Lista.Insert(Integer(TPedidoStatus.tpProntoParaEntrega), $FF0086E5);
    Lista.Insert(Integer(TPedidoStatus.tpConcluido), $FF04A620);

    Result := Lista[Integer(value)];
  except
    Lista.Free;
    Result := 0;
  end;

  Lista.Free;
end;
function TControllerStatusPedido.StatusGetString(value: TPedidoStatus): string;
  var
  Lista : TList<string>;
begin
  Lista := TList<string>.Create;

  try
    Lista.Insert(Integer(TPedidoStatus.tpEmDigitacao), 'Em digitação');
    Lista.Insert(Integer(TPedidoStatus.tpEmEspera), 'Em espera');
    Lista.Insert(Integer(TPedidoStatus.tpEmPreparo), 'Em preparação');
    Lista.Insert(Integer(TPedidoStatus.tpProntoParaEntrega), 'Pronto para entrega');
    Lista.Insert(Integer(TPedidoStatus.tpConcluido), 'Concluído');

    Result := Lista[Integer(value)];
  except
    Lista.Free;
    Result := 'ERRO';
  end;

  Lista.Free;
end;

end.
